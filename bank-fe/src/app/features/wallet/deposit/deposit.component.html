<div class="deposit-page">
  <!-- Hero Section -->
  <div class="hero-section">
    <div class="hero-content">
      <h1 class="hero-title">Nạp tiền</h1>
      <p class="hero-subtitle">Nạp tiền vào tài khoản của bạn một cách an toàn và nhanh chóng</p>
    </div>
  </div>

  <!-- Main Content -->
  <div class="content-wrapper">
    <div class="deposit-content">
      <!-- Main Form -->
      <div class="form-section">
        <div class="form-card">
          <div class="card-header">
            <div class="header-icon">
              <i class="pi pi-plus-circle"></i>
            </div>
            <div class="header-content">
              <h3 class="header-title">Nạp tiền vào tài khoản</h3>
              <p class="header-subtitle">Nhập số tiền bạn muốn nạp vào tài khoản</p>
            </div>
          </div>

        <div class="card-content">
          <form
            [formGroup]="depositForm"
            (ngSubmit)="onSubmit()"
            class="deposit-form"
          >
            <div class="form-field">
              <label for="amount" class="form-label">
                <i class="pi pi-money-bill"></i>
                Số tiền nạp <span class="required">*</span>
              </label>
              <div class="input-wrapper">
                <p-inputNumber
                  id="amount"
                  formControlName="amount"
                  mode="currency"
                  currency="VND"
                  locale="vi-VN"
                  [min]="1000"
                  [max]="100000000"
                  [step]="1000"
                  placeholder="Nhập số tiền"
                  class="amount-input"
                  [class.error]="
                    depositForm.get('amount')?.invalid &&
                    depositForm.get('amount')?.touched
                  "
                >
                </p-inputNumber>
              </div>
              <div
                class="error-message"
                *ngIf="
                  depositForm.get('amount')?.invalid &&
                  depositForm.get('amount')?.touched
                "
              >
                <i class="pi pi-exclamation-triangle"></i>
                <span *ngIf="depositForm.get('amount')?.errors?.['required']">
                  Vui lòng nhập số tiền
                </span>
                <span *ngIf="depositForm.get('amount')?.errors?.['min']">
                  Số tiền tối thiểu là 1,000 ₫
                </span>
                <span *ngIf="depositForm.get('amount')?.errors?.['max']">
                  Số tiền tối đa là 100,000,000 ₫
                </span>
              </div>
            </div>

            <div class="form-field">
              <label for="transName" class="form-label">
                <i class="pi pi-comment"></i>
                Ghi chú giao dịch (tùy chọn)
              </label>
              <div class="input-wrapper">
                <input
                  pInputText
                  id="transName"
                  formControlName="transName"
                  placeholder="Nhập ghi chú cho giao dịch"
                  class="form-input"
                  maxlength="100"
                />
              </div>
              <div class="char-count">
                {{ depositForm.get("transName")?.value?.length || 0 }}/100 ký tự
              </div>
            </div>

            <!-- Transaction Summary -->
            <div
              class="transaction-summary"
              *ngIf="depositForm.get('amount')?.value"
            >
              <h3 class="summary-title">Tóm tắt giao dịch</h3>
              <div class="summary-content">
                <div class="summary-item">
                  <span class="summary-label">Số tiền nạp:</span>
                  <span class="summary-value positive">
                    +{{ (depositForm.get("amount")?.value || 0).toLocaleString('vi-VN') }} ₫
                  </span>
                </div>
                <div class="summary-item">
                  <span class="summary-label">Phí giao dịch:</span>
                  <span class="summary-value">0 ₫</span>
                </div>
                <div class="summary-divider"></div>
                <div class="summary-item total">
                  <span class="summary-label">Tổng cộng:</span>
                  <span class="summary-value positive">
                    +{{ (depositForm.get("amount")?.value || 0).toLocaleString('vi-VN') }} ₫
                  </span>
                </div>
              </div>
            </div>

            <!-- Submit Button -->
            <button
              type="submit"
              class="deposit-button"
              [disabled]="depositForm.invalid || isLoading"
            >
              <i class="pi pi-check" *ngIf="!isLoading"></i>
              <i class="pi pi-spin pi-spinner" *ngIf="isLoading"></i>
              <span>{{
                isLoading ? "Đang xử lý..." : "Xác nhận nạp tiền"
              }}</span>
            </button>
          </form>
        </div>

        <div class="card-footer">
          <div class="info-message">
            <i class="pi pi-info-circle"></i>
            <span
              >Giao dịch sẽ được xử lý ngay lập tức và số dư sẽ được cập
              nhật</span
            >
          </div>
        </div>
      </div>
    </div>

    <!-- Info Panel -->
    <div class="info-section">
      <!-- Current Balance -->
      <div class="info-card balance-card">
        <div class="info-header">
          <div class="info-icon balance-icon">
            <i class="pi pi-wallet"></i>
          </div>
          <div class="info-content">
            <h3 class="info-title">Số dư hiện tại</h3>
            <p class="info-subtitle">Tài khoản của bạn</p>
          </div>
        </div>
        <div class="info-body">
          <div class="balance-amount">
            {{ (currentBalance?.balance ?? 0).toLocaleString('vi-VN') }} ₫
          </div>
        </div>
      </div>

      <!-- Deposit Info -->
      <div class="info-card details-card">
        <div class="info-header">
          <div class="info-icon details-icon">
            <i class="pi pi-info-circle"></i>
          </div>
          <div class="info-content">
            <h3 class="info-title">Thông tin nạp tiền</h3>
            <p class="info-subtitle">Chi tiết giao dịch</p>
          </div>
        </div>
        <div class="info-body">
          <div class="info-items">
            <div class="info-item">
              <div class="item-icon">
                <i class="pi pi-info-circle"></i>
              </div>
              <div class="item-content">
                <h4 class="item-title">Giới hạn giao dịch</h4>
                <p class="item-description">
                  Tối thiểu: 1,000 ₫<br />
                  Tối đa: 100,000,000 ₫
                </p>
              </div>
            </div>

            <div class="info-item">
              <div class="item-icon">
                <i class="pi pi-clock"></i>
              </div>
              <div class="item-content">
                <h4 class="item-title">Thời gian xử lý</h4>
                <p class="item-description">
                  Giao dịch được xử lý ngay lập tức
                </p>
              </div>
            </div>

            <div class="info-item">
              <div class="item-icon">
                <i class="pi pi-shield"></i>
              </div>
              <div class="item-content">
                <h4 class="item-title">Bảo mật</h4>
                <p class="item-description">
                  Tất cả giao dịch đều được mã hóa và bảo mật
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
